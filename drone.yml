kind: pipeline
type: kubernetes
name: default
steps:
  - name: build
    image: sankar31/baseimg:1.0
    commands:
      - mvn install -DskipTests=true -Dmaven.javadoc.skip=true -B -V
  - name : buildimage
    image: plugins/docker
    privileged: true
    settings:
      username: sankar31
      password: 123sinku
      repo: sankar31/droneex
      dockerfile: Dockerfile
      tags: 1.2
  - name : kubetest
    image: vallard/drone-kube
    template: droneex-k8.yaml
    server : https://046D124070CC5E1C5698E3BF04403DB5.gr7.us-east-1.eks.amazonaws.com
